<%- include('../../partials/header') %>
<%- include('../../partials/admindash_header.ejs') %>	
<div class="container col-md-8 col-xl-6 mt-5">
	<div class="container mt-2">
		<div class="container d-flex flex-column mb-3">
			<div class="align-self-center">
				<h2 class="text-capitalize">Store Access</h2>
			</div>
		</div>
		
		<div class="container d-flex flex-column"> 
			<ul class="nav nav-tabs" id="storeTab" role="tablist">
				<li class="nav-item" role="presentation">
					<a class="nav-link text-secondary active" id="allstores-tab" data-toggle="tab" href="#allstores" role="tab" aria-controls="allstores" aria-selected="true">All Stores</a>
				</li>
				<li class="nav-item" role="presentation">
					<a class="nav-link text-secondary" id="approvedstores-tab" data-toggle="tab" href="#approvedstores" role="tab" aria-controls="approvedstores" aria-selected="false">Active</a>
				</li>
				<li class="nav-item" role="presentation">
					<a class="nav-link text-secondary" id="unapprovedstores-tab" data-toggle="tab" href="#unapprovedstores" role="tab" aria-controls="unapprovedstores" aria-selected="false">Unapproved</a>
				</li>
				<li class="nav-item" role="presentation">
					<a class="nav-link text-secondary" id="suspendedstores-tab" data-toggle="tab" href="#suspendedstores" role="tab" aria-controls="suspendedstores" aria-selected="false">Suspended</a>
				</li>
			</ul>
			
			<div class="tab-content" id="storeTabContent">
				
				
				<div class="tab-pane fade show active" id="allstores" role="tabpanel" aria-labelledby="allstores-tab">
				<% stores.forEach((store)=>{ %>
				<%if(store.status){%>
				<div id="form-id">
					<div class="container d-flex flex-row justify-content-sm-between border border-secondary rounded mt-3 my-1">
					<div class="row col-lg-9">
						<div class="container d-flex flex-column">
						<div clas="align-self-start"><h4 class="text-capitalize mt-2 mb-0" ><data id="store-header" value="<%=store._id%>"><%=store.storename%></data></h4>
						</div>
						<div clas="align-self-end">
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-0" id="store-rdate">Requested: <%=store.requestdate.toUTCString()%></p>
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-2" id="store-status"> Status: <%=store.status%></p>
						</div>
						<div id="store-id" hidden><%store._id%></div>
					</div>
					</div>
					<div class="row col-lg-3">
						<div class="container d-flex flex-column">
						<div class="align-self-end my-auto">
							<%if(store.status==='Active'){%>
							<button class="btn btn-success btn-lg shadow" type="submit">Block</button>
							<%}else if(store.status==='Blocked'){%>
							<button class="btn btn-success btn-lg shadow" type="submit">Unblock</button>
							<%}else{%>
							<button class="btn btn-success btn-lg shadow" type="submit">Approve</button>
							<%}%>
						</div>
					</div>
					</div>
					</div>	
				</div>
				<%}%>	
				<% })%>
				</div>
				
				<div class="tab-pane fade" id="approvedstores" role="tabpanel" aria-labelledby="approvedstores-tab">
				<% stores.forEach((store)=>{ %>
				<%if(store.status==='Active'){%>
				<div id="form-id">
					<div class="container d-flex flex-row justify-content-sm-between border border-secondary rounded mt-3 my-1">
					<div class="row col-lg-9">
						<div class="container d-flex flex-column">
						<div clas="align-self-start"><h4 class="text-capitalize mt-2 mb-0" ><data id="store-header" value="<%=store._id%>"><%=store.storename%></data></h4>
						</div>
						<div clas="align-self-end">
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-0" id="store-rdate">Requested: <%=store.requestdate.toUTCString()%></p>
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-2" id="store-status"> Status: <%=store.status%></p>
						</div>
						<div id="store-id" hidden><%store._id%></div>
					</div>
					</div>
					<div class="row col-lg-3">
						<div class="container d-flex flex-column">
						<div class="align-self-end my-auto">
							<button class="btn btn-success btn-lg shadow" type="submit">Block</button>
						</div>
					</div>
					</div>
				</div>	
				</div>
				<%}%>
				<% })%>
				</div>
				<div class="tab-pane fade" id="unapprovedstores" role="tabpanel" aria-labelledby="unapprovedstores-tab">
				<% stores.forEach((store)=>{ %>
				<%if(store.status==='Awaiting Approval'){%>
				<div id="form-id">
					<div class="container d-flex flex-row justify-content-sm-between border border-secondary rounded mt-3 my-1">
					<div class="row col-lg-9">
						<div class="container d-flex flex-column">
						<div clas="align-self-start"><h4 class="text-capitalize mt-2 mb-0" ><data id="store-header" value="<%=store._id%>"><%=store.storename%></data></h4>
						</div>
						<div clas="align-self-end">
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-0" id="store-rdate">Requested: <%=store.requestdate.toUTCString()%></p>
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-2" id="store-status"> Status: <%=store.status%></p>
						</div>
						<div id="store-id" hidden><%store._id%></div>
					</div>
					</div>
					<div class="row col-lg-3">
						<div class="container d-flex flex-column">
						<div class="align-self-end my-auto">
							<button class="btn btn-success btn-lg shadow" type="submit">Approve</button>
						</div>
					</div>
					</div>
				</div>	
				</div>
				<%}%>
				<% })%>
				</div>
				<div class="tab-pane fade" id="suspendedstores" role="tabpanel" aria-labelledby="suspendedstores-tab">
				<% stores.forEach((store)=>{ %>
				<%if(store.status==='Blocked'){%>
				<div id="form-id">
					<div class="container d-flex flex-row justify-content-sm-between border border-secondary rounded mt-3 my-1">
					<div class="row col-lg-9">
						<div class="container d-flex flex-column">
						<div clas="align-self-start"><h4 class="text-capitalize mt-2 mb-0" ><data id="store-header" value="<%=store._id%>"><%=store.storename%></data></h4>
						</div>
						<div clas="align-self-end">
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-0" id="store-rdate">Requested: <%=store.requestdate.toUTCString()%></p>
						<p class="font-italic font-weigt-lighter text-secondary mt-0 mb-2" id="store-status"> Status: <%=store.status%></p>
						</div>
						<div id="store-id" hidden><%store._id%></div>
					</div>
					</div>
					<div class="row col-lg-3">
						<div class="container d-flex flex-column">
						<div class="align-self-end my-auto">
							<button class="btn btn-success btn-lg shadow" type="submit">Unblock</button>
						</div>
					</div>
					</div>
				</div>	
				</div>
				<%}%>
				<% })%>
				</div
			
				
			 	
			</div>
		</div>
		</div>
	</div>
</div>
<script src="/sc_static/scripts/admin/storeaccess.js" type="text/javascript"></script>
<%- include('../../partials/admindash_footer.ejs') %>
<%- include('../../partials/footer') %>